(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[4],{124:function(e,t,n){"use strict";var r=n(11),a=n.n(r),o=n(12),c=n.n(o),i=n(28),u=n.n(i),s=n(24),l=n.n(s),f=n(25),p=n.n(f),h=n(14),m=n.n(h),v=n(2),y=n.n(v),d=n(0),g=n.n(d),b=n(1),R=n.n(b),E=n(30),O=n(27),C=n(17),_=n(29),w=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},j=function(e,t){var n=t.pathname,r=null;return e.map((function(e){return e.active=new RegExp("^".concat(w(e.to+"/"))).test(n+"/"),e.active&&(r&&(r.active=!1),r=e),e}))},k=n(22),D=n.n(k),S=n(47),x=n(26);n(125);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var N=function(e){l()(n,e);var t=L(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.left,n=e.children,r=e.right,a=e.center,o=e.theme;return g.a.createElement("div",{className:Object(x.a)("LayoutHeader",o)},g.a.createElement(S.a,null,g.a.createElement("div",{className:"LayoutHeader__wrap"},g.a.createElement("div",{className:"LayoutHeader__left"},t),g.a.createElement("div",{className:"LayoutHeader__center"},n||a),g.a.createElement("div",{className:"LayoutHeader__right"},r))))}}]),n}(d.Component);y()(N,"propTypes",{children:R.a.node,left:R.a.node,right:R.a.node,center:R.a.node,theme:R.a.oneOfType([R.a.string,R.a.array])}),y()(N,"defaultProps",{theme:""});var P=N,T=n(46);n(126);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var A=function(e){l()(n,e);var t=F(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props.items;return g.a.createElement("div",{className:"MenuTop"},g.a.createElement("ul",{className:"MenuTop__list"},e.map((function(e,t){return g.a.createElement("li",{key:t,className:D()("MenuTop__item ",{MenuTop__item_active:e.active})},g.a.createElement(T.a,{to:e.to,className:"MenuTop__link"},e.title))}))))}}]),n}(d.Component);y()(A,"propTypes",{items:R.a.arrayOf(R.a.shape({title:R.a.string,to:R.a.string,active:R.a.bool})).isRequired,theme:R.a.oneOfType([R.a.string,R.a.array])}),y()(A,"defaultProps",{});var q=A,B=n(49);n(127);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var I=function(e){l()(n,e);var t=H(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){var e=this.props,t=e.to,n=e.title;return g.a.createElement(T.a,{className:Object(x.a)("Logo",this.props.theme),to:t,title:n},"Skeleton")}}]),n}(d.Component);y()(I,"propTypes",{to:R.a.string,title:R.a.string,theme:R.a.oneOfType([R.a.string,R.a.array])}),y()(I,"defaultProps",{to:"/",title:"",theme:""});var K=I;function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m()(e);if(t){var a=m()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var $=function(e){l()(n,e);var t=M(n);function n(e){var r;return a()(this,n),r=t.call(this,e),y()(u()(r),"onClickLogin",(function(){r.props.history.push("/login")})),y()(u()(r),"onClickLogout",(function(){_.a.clear()})),r.state={items:j([{title:"Главная",to:"/",active:!1},{title:"О нас",to:"/about",active:!1},{title:"Каталог",to:"/catalog",active:!1},{title:"Редактор каталога",to:"/catalog-editor",active:!1},{title:"Админка",to:"/private",active:!1}],e.location)},r}return c()(n,[{key:"componentDidUpdate",value:function(e){var t=this.state.items;this.props.location!==e.location&&this.setState({items:j(t,e.location)})}},{key:"renderRight",value:function(){var e=[];return this.props.session.exists?e.push(g.a.createElement(B.a,{key:1,theme:["clear-white","margins"],onClick:this.onClickLogout},"Выход")):e.push(g.a.createElement(B.a,{key:1,theme:["clear-white","margins"],onClick:this.onClickLogin},"Вход")),e}},{key:"render",value:function(){var e=this.state.items;return g.a.createElement(P,{left:g.a.createElement(K,null),right:this.renderRight(),center:g.a.createElement(q,{items:e})})}}]),n}(d.Component);y()($,"propTypes",{dispatch:R.a.func.isRequired,location:R.a.object.isRequired,history:R.a.object.isRequired,session:R.a.object.isRequired});t.a=Object(O.compose)(C.g,Object(E.b)((function(e){return{session:e.session}})))($)},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(17),a=n(13),o=n(0),c=n.n(o),i=n(15),u=(n(1),n(4)),s=n(9),l=n(18);c.a.Component;c.a.Component;var f=function(e,t){return"function"==typeof e?e(t):e},p=function(e,t){return"string"==typeof e?Object(i.c)(e,null,null,t):e},h=function(e){return e},m=c.a.forwardRef;void 0===m&&(m=h);var v=m((function(e,t){var n=e.innerRef,r=e.navigate,a=e.onClick,o=Object(s.a)(e,["innerRef","navigate","onClick"]),i=o.target,l=Object(u.a)({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||i&&"_self"!==i||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=h!==m&&t||n,c.a.createElement("a",l)}));var y=m((function(e,t){var n=e.component,a=void 0===n?v:n,o=e.replace,i=e.to,y=e.innerRef,d=Object(s.a)(e,["component","replace","to","innerRef"]);return c.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,r=p(f(i,e.location),e.location),s=r?n.createHref(r):"",v=Object(u.a)({},d,{href:s,navigate:function(){var t=f(i,e.location);(o?n.replace:n.push)(t)}});return h!==m?v.ref=t||y:v.innerRef=y,c.a.createElement(a,v)}))})),d=function(e){return e},g=c.a.forwardRef;void 0===g&&(g=d);g((function(e,t){var n=e["aria-current"],a=void 0===n?"page":n,o=e.activeClassName,i=void 0===o?"active":o,h=e.activeStyle,m=e.className,v=e.exact,b=e.isActive,R=e.location,E=e.sensitive,O=e.strict,C=e.style,_=e.to,w=e.innerRef,j=Object(s.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return c.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=R||e.location,o=p(f(_,n),n),s=o.pathname,k=s&&s.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),D=k?Object(r.f)(n.pathname,{path:k,exact:v,sensitive:E,strict:O}):null,S=!!(b?b(D,n):D),x=S?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(m,i):m,L=S?Object(u.a)({},C,{},h):C,N=Object(u.a)({"aria-current":S&&a||null,className:x,style:L,to:o},j);return d!==g?N.ref=t||w:N.innerRef=w,c.a.createElement(y,N)}))}))},78:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),o=n(6),c=n.n(o),i=n(0),u=n.n(i),s=n(50),l=n(124),f=n(47),p=n(11),h=n.n(p),m=n(12),v=n.n(m),y=n(28),d=n.n(y),g=n(24),b=n.n(g),R=n(25),E=n.n(R),O=n(14),C=n.n(O),_=n(2),w=n.n(_),j=n(1),k=n.n(j),D=(n(22),n(26));n(133);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E()(this,n)}}var x=function(e){b()(n,e);var t=S(n);function n(){return h()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.input,r=e.error,a=e.theme;return u.a.createElement("div",{className:Object(D.a)("LayoutField",a)},u.a.createElement("div",{className:"LayoutField__label"},t),u.a.createElement("div",{className:"LayoutField__input"},u.a.createElement("div",{className:"LayoutField__input-inner"},n),u.a.createElement("div",{className:"LayoutField__error"},r)))}}]),n}(i.Component);w()(x,"propTypes",{label:k.a.node,input:k.a.node,error:k.a.node,theme:k.a.oneOfType([k.a.string,k.a.array])}),w()(x,"defaultProps",{theme:""});var L=x;n(134);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E()(this,n)}}var P=function(e){b()(n,e);var t=N(n);function n(){var e;h()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),w()(d()(e),"onChange",(function(t){return(0,e.props.onChange)(t.target.value)})),w()(d()(e),"onFocus",(function(t){return e.props.onFocus(t)})),w()(d()(e),"onBlur",(function(){return e.props.onBlur()})),e}return v()(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.placeholder,r=e.required,a=e.focused,o=e.value,c=e.disabled,i=e.tabIndex,s=e.autocomplete;return u.a.createElement("div",{className:Object(D.a)("Input",this.props.theme)},u.a.createElement("input",{className:"Input__input",value:o,type:t,placeholder:n,tabIndex:i,disabled:c,required:r,autoFocus:a,autoComplete:s?"on":"off",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur}))}}]),n}(i.Component);w()(P,"propTypes",{value:k.a.node.isRequired,type:k.a.string,placeholder:k.a.string,required:k.a.bool,focused:k.a.bool,disabled:k.a.bool,tabIndex:k.a.number,autocomplete:k.a.bool,onChange:k.a.func.isRequired,onFocus:k.a.func,onBlur:k.a.func,theme:k.a.oneOfType([k.a.string,k.a.array])}),w()(P,"defaultProps",{onBlur:function(){},onChange:function(){},onFocus:function(){},disabled:!1,type:"text"});var T=P;n(135);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E()(this,n)}}var A=function(e){b()(n,e);var t=F(n);function n(){return h()(this,n),t.apply(this,arguments)}return v()(n,[{key:"renderItems",value:function(){var e=this.props,t=e.path,n=e.errors;if(!(n||n instanceof Array||n instanceof Object))return null;var r=[];return(n instanceof Array?n:[n]).map((function(e){e&&e.message&&(e.path&&0===e.path.indexOf(t)&&t.length>0||0===e.path.length&&0===t.length||!e.path&&!t)&&r.push(u.a.createElement("div",{key:e.code,className:"Error__item"},e.message))})),r}},{key:"render",value:function(){return u.a.createElement("div",{className:"Error"},u.a.Children.toArray(this.renderItems()))}}]),n}(i.Component);w()(A,"propTypes",{path:k.a.string,errors:k.a.any});var q=A,B=n(49);n(136);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C()(e);if(t){var a=C()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return E()(this,n)}}var M=function(e){b()(n,e);var t=K(n);function n(){var e;h()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),w()(d()(e),"onChange",(function(t){return function(n){var r=e.props,a=r.data;(0,r.onChange)(I(I({},a),{},w()({},t,n)))}})),w()(d()(e),"onSubmit",(function(t){var n=e.props,r=n.data,a=n.onSubmit;t.preventDefault(),a(I({},r))})),e}return v()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.errors,r=e.wait,a=e.theme;return u.a.createElement("form",{className:Object(D.a)("FormLogin",a),onSubmit:this.onSubmit},u.a.createElement(L,{label:"Логин",input:u.a.createElement(T,{type:"text",value:t.login,onChange:this.onChange("login")}),error:u.a.createElement(q,{errors:n,path:"login"})}),u.a.createElement(L,{label:"Пароль",input:u.a.createElement(T,{type:"password",value:t.password,onChange:this.onChange("password")}),error:u.a.createElement(q,{errors:n,path:"password"})}),u.a.createElement(L,{input:u.a.createElement(B.a,{type:"submit",disabled:r},"Войти",r&&"..."),error:u.a.createElement(q,{errors:n,path:""})}))}}]),n}(i.Component);w()(M,"propTypes",{data:k.a.shape({login:k.a.string.isRequired,password:k.a.string.isRequired}).isRequired,errors:k.a.any,wait:k.a.bool,onChange:k.a.func,onSubmit:k.a.func,theme:k.a.oneOfType([k.a.string,k.a.array])}),w()(M,"defaultProps",{theme:["default"],errors:{},onChange:function(){},onSubmit:function(){}});var $,U=M,z=n(33),G=n(7),J=n(16),Q=n(29),V=n(40),W={change:function(e){G.a.dispatch({type:V.b.SET,payload:{data:e}})},submit:($=c()(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G.a.dispatch({type:V.b.SET,payload:{wait:!0,errors:null}}),e.prev=1,e.next=4,J.e.login(t);case 4:return n=e.sent,r=n.data.result,e.next=8,Q.a.save({user:r.user,token:r.token});case 8:return G.a.dispatch({type:V.b.SET,payload:V.a}),e.abrupt("return",r);case 12:if(e.prev=12,e.t0=e.catch(1),!(e.t0.response&&e.t0.response.data&&e.t0.response.data.error)){e.next=18;break}G.a.dispatch({type:V.b.SET,payload:{wait:!1,errors:e.t0.response.data.error.data.issues}}),e.next=19;break;case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[1,12]])}))),function(e){return $.apply(this,arguments)})},X=n(38);t.default=u.a.memo((function(e){var t=Object(z.a)((function(e){return{formLogin:e.formLogin}})),n={onChangeForm:Object(i.useCallback)(function(){var e=c()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.change(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),onSubmitForm:Object(i.useCallback)(function(){var e=c()(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.submit(t);case 2:X.a.goPrivate();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[])};return u.a.createElement(s.a,{header:u.a.createElement(l.a,null)},u.a.createElement(f.a,null,u.a.createElement(i.Fragment,null,u.a.createElement("h1",null,"Login page"),u.a.createElement(U,{data:t.formLogin.data,errors:t.formLogin.errors,wait:t.formLogin.wait,onChange:n.onChangeForm,onSubmit:n.onSubmitForm}))))}))}}]);